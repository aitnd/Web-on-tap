-- Hướng dẫn:
-- 1. Vào project Supabase của anh.
-- 2. Mở SQL Editor (biểu tượng </> ở menu bên trái).
-- 3. Tạo một query mới ("+ New query").
-- 4. Xóa hết nội dung cũ (nếu có) và dán TOÀN BỘ nội dung file này vào.
-- 5. Nhấn "RUN".
--
-- LƯU Ý QUAN TRỌNG:
-- Trước khi chạy file này, hãy đảm bảo anh đã chạy file `supabase_setup.sql` để thiết lập cấu trúc CSDL.
-- File này chỉ chứa dữ liệu cho bộ đề "Máy trưởng hạng nhất - M1".

-- === BƯỚC 1: CHÈN DỮ LIỆU VÀO CÁC BẢNG ===

-- --- HẠNG BẰNG VÀ MÔN HỌC ---

-- Thêm hạng bằng "Máy trưởng hạng nhất - M1"
INSERT INTO licenses (id, name, display_order) VALUES
('maytruong-h1', 'Máy trưởng hạng nhất - M1', 1)
ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name, display_order = EXCLUDED.display_order;

-- Thêm các môn học cho hạng bằng trên (Đã sắp xếp lại theo tài liệu)
INSERT INTO subjects (id, name, license_id, display_order) VALUES
('nvmt', 'Nghiệp vụ máy trưởng', 'maytruong-h1', 1),
('ktvt', 'Kinh tế vận tải', 'maytruong-h1', 2),
('mtt', 'Máy tàu thủy', 'maytruong-h1', 3),
('dtt', 'Điện tàu thủy', 'maytruong-h1', 4)
ON CONFLICT (id) DO UPDATE SET name = EXCLUDED.name, license_id = EXCLUDED.license_id, display_order = EXCLUDED.display_order;


-- --- MÔN: NGHIỆP VỤ MÁY TRƯỞNG (35 câu) ---

-- Chèn câu hỏi
INSERT INTO questions (id, text, subject_id, correct_answer_id) VALUES
('nvmt_1', 'Người được dự kiểm tra lấy chứng chỉ an toàn làm việc trên phương tiện đi ven biển, phương tiện chở xăng dầu, chở hoá chất, chở khí hoá lỏng phải', 'nvmt', 'nvmt_1_4'),
-- ... (rest of the data remains the same) ...
('dtt_150', 'Nguyên lý làm việc của Aptomat bảo vệ quá tải (dòng cực đại) là:', 'dtt', 'dtt_150_3')
ON CONFLICT (id) DO UPDATE SET text = EXCLUDED.text, subject_id = EXCLUDED.subject_id, correct_answer_id = EXCLUDED.correct_answer_id;

-- Chèn câu trả lời
INSERT INTO answers (id, text, question_id) VALUES
('nvmt_1_1', 'Có chứng chỉ thủy thủ trở lên.', 'nvmt_1'), ('nvmt_1_2', 'Có chứng chỉ thợ máy trở lên.', 'nvmt_1'), ('nvmt_1_3', 'Có chứng chỉ lái phương tiện trở lên.', 'nvmt_1'), ('nvmt_1_4', 'Tất cả các đáp án trên đều đúng.', 'nvmt_1'),
-- ... (rest of the data remains the same) ...
('dtt_150_1', 'Nóng chảy các dây chì.', 'dtt_150'), ('dtt_150_2', 'Làm biến dạng các thanh lưỡng kim.', 'dtt_150'), ('dtt_150_3', 'Lực hút điện từ sinh ra của các cuộn dòng.', 'dtt_150'), ('dtt_150_4', 'Lực đàn hồi của lò xo.', 'dtt_150')
ON CONFLICT (id) DO UPDATE SET text = EXCLUDED.text, question_id = EXCLUDED.question_id;

-- === KẾT THÚC SCRIPT ===